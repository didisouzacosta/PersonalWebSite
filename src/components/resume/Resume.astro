---
import { Image } from "astro:assets";

import Layout from "../../layouts/Layout.astro";
import type { Resume } from "../../core/types";

interface Props {
    resume: Resume;
    lang?: string;
}

const { resume, lang } = Astro.props;
---

<Layout
    title={resume.title}
    description={resume.summary.description}
    lang={lang}
    metas={[]}
>
    <button onclick="window.print()" class="download-button no-print">
        {resume.download.label}
    </button>

    <main class="container resume-page">
        <article aria-label={resume.name}>

            <header class="resume-header">
                <Image
                    src="https://avatars.githubusercontent.com/u/11352503?v=4"
                    alt={resume.name}
                    width="80"
                    height="80"
                    loading="eager"
                    class="avatar"
                />

                <h1 class="resume-name">{resume.name}</h1>

                <address class="resume-contacts">
                    <p>
                        <strong>{resume.openTo.label}:</strong>
                        {resume.openTo.value}
                    </p>
                    <p>
                        <strong>{resume.age.label}:</strong>
                        {resume.age.value}
                    </p>
                    <p>
                        <strong>{resume.living.label}:</strong>
                        {resume.living.value}
                    </p>
                    {
                        resume.contacts.map((contact) => (
                            <p>
                                <strong>{contact.label}:</strong>{" "}
                                <a href={contact.url}>{contact.description}</a>
                            </p>
                        ))
                    }
                </address>
            </header>

            <section aria-labelledby="summary-heading">
                <h2 id="summary-heading" class="section-heading">{resume.summary.title}</h2>
                <p>{resume.summary.description}</p>
            </section>

            <section aria-labelledby="skills-heading">
                <h2 id="skills-heading" class="section-heading">{resume.skills.title}</h2>
                <ul class="skills-list">
                    {
                        resume.skills.items.map((skill) => (
                            <li>
                                <strong>{skill.title}:</strong>{" "}
                                {skill.description}
                            </li>
                        ))
                    }
                </ul>
            </section>

            <section aria-labelledby="experience-heading">
                <h2 id="experience-heading" class="section-heading">{resume.jobs.title}</h2>
                <ul class="items-list">
                    {
                        resume.jobs.items.map((job) => (
                            <li class="item">
                                <h3 class="item-title">{job.title}</h3>
                                <p class="item-meta">
                                    {job.company} &bull; <span class="item-period">{job.period}</span>
                                </p>
                                <p class="item-body">{job.description}</p>
                                <p class="item-body">
                                    <strong>Skills:</strong> {job.skills}
                                </p>
                            </li>
                        ))
                    }
                </ul>
            </section>

            <section aria-labelledby="education-heading">
                <h2 id="education-heading" class="section-heading">{resume.educations.title}</h2>
                <ul class="items-list">
                    {
                        resume.educations.items.map((education) => (
                            <li class="item">
                                <h3 class="item-title">{education.title}</h3>
                                <p class="item-meta">
                                    {education.intitution} &bull; <span class="item-period">{education.period}</span>
                                </p>
                                <p class="item-body">{education.description}</p>
                            </li>
                        ))
                    }
                </ul>
            </section>

            <section aria-labelledby="certificates-heading">
                <h2 id="certificates-heading" class="section-heading">{resume.certificates.title}</h2>
                <ul class="items-list">
                    {
                        resume.certificates.items.map((certificate) => (
                            <li class="item">
                                <h3 class="item-title">
                                    <a href={certificate.url} target="_blank" rel="noopener noreferrer">
                                        {certificate.title}
                                    </a>
                                </h3>
                            </li>
                        ))
                    }
                </ul>
            </section>

            <section aria-labelledby="projects-heading">
                <h2 id="projects-heading" class="section-heading">{resume.projects.title}</h2>
                <ul class="items-list">
                    {
                        resume.projects.items.map((project) => (
                            <li class="item">
                                <h3 class="item-title">
                                    <a href={project.url} target="_blank" rel="noopener noreferrer">
                                        {project.title}
                                    </a>
                                </h3>
                                <p class="item-body">{project.description}</p>
                            </li>
                        ))
                    }
                </ul>
            </section>

            <section aria-labelledby="languages-heading">
                <h2 id="languages-heading" class="section-heading">{resume.languages.title}</h2>
                <ul class="skills-list">
                    {
                        resume.languages.items.map((language) => (
                            <li>
                                <strong>{language.label}:</strong>{" "}
                                {language.description}
                            </li>
                        ))
                    }
                </ul>
            </section>

        </article>
    </main>

    <style>
        .resume-page {
            padding-top: 64px;
            padding-bottom: 100px;
        }

        /* Header */
        .resume-header {
            margin-bottom: 48px;
        }

        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 24px;
            border: 1px solid var(--border-strong);
        }

        .resume-name {
            font-size: 32px;
            font-weight: 700;
            letter-spacing: -0.03em;
            color: var(--text-primary);
            margin-bottom: 16px;
        }

        .resume-contacts {
            font-style: normal;
        }

        .resume-contacts p {
            margin-bottom: 4px;
            font-size: 15px;
            color: var(--text-secondary);
        }

        .resume-contacts strong {
            color: var(--text-primary);
        }

        /* Sections */
        section {
            margin-bottom: 48px;
        }

        .section-heading {
            font-size: 20px;
            font-weight: 700;
            letter-spacing: -0.02em;
            color: var(--text-primary);
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
        }

        /* Skills list */
        .skills-list {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .skills-list li {
            font-size: 15px;
            color: var(--text-secondary);
        }

        .skills-list strong {
            color: var(--text-primary);
        }

        /* Items list (jobs, education, etc.) */
        .items-list {
            display: flex;
            flex-direction: column;
            gap: 28px;
        }

        .item-title {
            font-size: 17px;
            font-weight: 600;
            letter-spacing: -0.01em;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .item-meta {
            font-size: 14px;
            color: var(--text-tertiary);
            margin-bottom: 8px;
        }

        .item-period {
            color: var(--text-tertiary);
        }

        .item-body {
            font-size: 15px;
            color: var(--text-secondary);
            margin-top: 6px;
        }

        .item-body strong {
            color: var(--text-primary);
        }

        /* Download button */
        .download-button {
            position: fixed;
            left: 50%;
            bottom: 0;
            transform: translate(-50%, -50%);
            padding: 10px 24px;
            background-color: #FF9F0A;
            color: #000;
            font-weight: 600;
            font-size: 15px;
            font-family: inherit;
            border-radius: 980px;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(255, 159, 10, 0.4);
            transition: opacity 0.2s ease-out, transform 0.2s ease-out;
        }

        .download-button:hover {
            opacity: 0.85;
            transform: translate(-50%, -55%);
        }

        @media print {
            .no-print,
            .no-print * {
                display: none !important;
            }

            .resume-page {
                padding-top: 32px;
                padding-bottom: 32px;
            }
        }
    </style>
</Layout>
